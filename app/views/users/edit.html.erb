<div class="page-header">
  <ol class="breadcrumb">
    <li><a href="<%= root_path %>">Home</a></li>
    <li><a href="<%= users_path %>">Manage Guiders</a></li>
    <li class="active">Edit User &quot;<%=@guider.name %>&quot;</li>
  </ol>

  <h1>Edit User "<%=@guider.name %>"</h1>
</div>

<%= link_to new_user_schedule_path(@guider), class: 'btn btn-primary' do %>
  <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> Add schedule
<% end %>

<table class="table table-striped table-bordered table-hover">
  <caption><span class="sr-only">List of guiders</span></caption>
  <colgroup>
    <col width="91%">
    <col width="9%">
  </colgroup>
  <thead>
    <tr>
      <th>Schedule</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  <% @schedules.each do |schedule| %>
    <tr>
      <td>
        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> <%= schedule.title %>
        <% unless schedule.modifiable? %>
          <p>
            <b>
            This schedule cannot be modified as it starts less than six weeks from now.
            Create a new schedule to change this guider's bookable slots.
            </b>
          </p>
        <% end %>
      </td>
      <td nowrap="true">
        <% if schedule.modifiable? %>
          <%= link_to edit_user_schedule_path(@guider, schedule), title: "Edit Schedule #{schedule.title}", class: 'btn btn-info t-edit' do %>
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <span class="sr-only">Edit Schedule</span>
          <% end %>
        <% else %>
          <span class="btn btn-info disabled">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <span class="sr-only">Edit Schedule (Disabled)</span>
          </span>
        <% end %>
        <div class="inline-button-to-container">
          <%= button_to(
              user_schedule_path(@guider, schedule),
              method: :delete,
              title: 'Delete Schedule',
              class: 'btn btn-danger t-delete',
              disabled: !schedule.modifiable?,
              data: { confirm: "Are you sure you want to delete the schedule \"#{schedule.title}\"?" }
            ) do %>
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span><span class="sr-only">Delete Schedule</span>
          <% end %>
        </div>
      </td>
    </tr>
  <% end %>
  <% if @schedules.empty? %>
    <tr>
      <td colspan="2">No slots</td>
    </tr>
  <% end %>
  </tbody>
</table>
