<h1>Create a holiday</h1>
<%= form_for @holiday, layout: :basic do |f| %>
  <%= f.text_field :title, class: 't-title' %>
  <% date_range = "#{@holiday.try(:start_at)} - #{@holiday.try(:end_at)}", 't-date-range' %>
  <%=
    f.text_field(
      :date_range,
      class: 't-date-range',
      data: {
        module: 'DateRangePicker',
        config: {
          timePicker: true,
          timePickerIncrement: 5,
          dateLimit: {
            days: 1
          },
          locale: {
            format: 'DD/MM/YYYY h:mm A'
          }
        }
      }
    )
  %>
  <div id="guiders" data-module="SortableList" data-default-order='{"value": "name", "order": "asc"}' data-config='<%= sortable_list_config(@groups) %>'>
    <%= label_tag 'user_ids[]' do %>
      <%= required_label(:guiders) %>
      <div class="form-inline">
        <div class="form-group">
          <label for="user-search">Search</label>
          <input class="search form-control t-search" value="<%= @user_search %>" name="user_search" id="user_search" placeholder="Search">
        </div>
      </div>
      <table class="table table-striped table-bordered table-hover" data-module="MultiCheckbox" data-config='{"selectedClassName":"info"}'>
        <caption><span class="sr-only">List of guiders</span></caption>
        <colgroup>
          <col width="1%">
          <col width="54%">
          <col width="44%">
          <col width="1%">
        </colgroup>
        <thead>
          <tr>
            <th><label for="select-all"><input type="checkbox" id="select_all" name="select_all" class="select-all" data-multi-checkbox="all"> <span class="sr-only">Select All</span></label></th>
            <th><span class="sort" data-sort="name">Name</span></th>
            <th>Groups</th>
          </tr>
        </thead>
        <tbody class="list">
          <% @guiders.each do |guider| %>
            <tr data-multi-checkbox-group class="t-guider guider">
              <td>
                <%=
                  f.check_box(
                    :user_ids,
                    {
                      use_label: false,
                      multiple: true,
                      class: 'guider__checkbox t-checkbox',
                      'data-multi-checkbox': 'item'
                    },
                    guider.id,
                    nil
                  )
                %>
                <span class="sr-only">Select <%= guider.name %></span>
              </td>
              <td><span class="glyphicon glyphicon-user" aria-hidden="true"></span> <span class="name"><%= guider.name %></span></td>
              <td>
                <% guider.groups.each do |group| %>
                  <span class="label label-info <%= dom_id(group) %> t-group"><%= group.name %></span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </div>

  <%= f.submit 'Save', class: 't-save' %>
<% end %>
