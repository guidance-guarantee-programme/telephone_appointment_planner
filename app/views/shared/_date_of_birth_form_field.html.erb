<%
  start_year = 120.years.ago
  form_element_day_id = "#{form.object_name}_date_of_birth_3i"
  form_element_month_id = "#{form.object_name}_date_of_birth_2i"
  form_element_year_id = "#{form.object_name}_date_of_birth_1i"
%>

<div class="form-dob clearfix" data-module="customer-age" data-output-id="js-customer-age">
  <%= field_with_errors_wrapper(form, :date_of_birth, 'form-dob__inputs-container') do %>
    <label for="<%= form_element_day_id %>">
      <span class="sr-only">Date of birth</span> <%= required_label(:day) %>
      <%=
        form.number_field(
          'date_of_birth(3i)',
          id: form_element_day_id,
          use_label: false,
          value: form.object.date_of_birth.try(:day),
          placeholder: 'DD',
          class: 'form-dob__input js-dob-day t-date-of-birth-day',
          min: 1,
          max: 31,
          'aria-describedby': 'dob-hint'
        )
      %>
    </label>
    <label for="<%= form_element_month_id %>">
      <span class="sr-only">Date of birth</span> <%= required_label(:month) %>
      <%=
        form.number_field(
          'date_of_birth(2i)',
          id: form_element_month_id,
          use_label: false,
          value: form.object.date_of_birth.try(:month),
          placeholder: 'MM',
          class: 'form-dob__input js-dob-month t-date-of-birth-month',
          min: 1,
          max: 12
        )
      %>
    </label>
    <label for="<%= form_element_year_id %>">
      <span class="sr-only">Date of birth</span> <%= required_label(:year) %>
      <%=
        form.number_field(
          'date_of_birth(1i)',
          id: form_element_year_id,
          use_label: false,
          value: form.object.date_of_birth.try(:year),
          placeholder: 'YYYY',
          class: 'form-dob__input form-dob__input--year js-dob-year t-date-of-birth-year',
          min: start_year.year,
          max: Date.today.year
        )
      %>
    </label>
    <% form.object.errors[:date_of_birth].each do |message| %>
      <div class="text-danger"><%= message %></div>
    <% end %>
  <% end %>
  <span class="bg-info form-dob__age" id="js-customer-age"></span>
</div>
<div class="help-block" id="dob-hint">For example, 31 3 1950</div>
