<div class="page-header">
  <ol class="breadcrumb">
    <li><a href="<%= root_path %>">Home</a></li>
    <li class="active">Search</li>
  </ol>
  <h1>Search</h1>
</div>

<div class="row form-group">
  <div class="col-md-12">
    <%= form_for @search, layout: :basic, method: 'GET', url: { action: :search } do |f| %>
      <%= f.text_field :q, label: 'Search', class: 't-q', placeholder: 'Search by first name, last name, or booking reference.' %>
      <%=
        f.text_field(
          :date_range,
          class: 't-date-range',
          data: {
            module: 'DateRangePicker',
            config: {
              autoUpdateInput: false,
              locale: {
                cancelLabel: 'Clear',
                format: 'DD/MM/YYYY'
              }
            }
          }
        )
      %>
      <%= f.submit 'Search', class: 't-search' %>
    <% end %>
  </div>
</div>

<table id="results" class="table table-striped table-bordered table-hover" data-module="SortableList" data-config='{"valueNames": ["id", "first_name", "last_name", "date", "status"]}' data-default-order='{"value": "id", "order": "asc"}'>
  <thead>
    <tr>
      <th><span class="sort" data-sort="id">Reference</span></th>
      <th><span class="sort" data-sort="first_name">First Name</span></th>
      <th><span class="sort" data-sort="last_name">Last Name</span></th>
      <th><span class="sort" data-sort="date">Date</span></th>
      <th><span class="sort" data-sort="status">Status</span></th>
      <th width="1%"></th>
    </tr>
  </thead>
  <tbody class="list">
    <% @results.each do |result| %>
      <% result = AppointmentPresenter.new(result) %>
      <tr class='t-result'>
        <td class='t-id'><span class="id"><%= result.id %></span></td>
        <td><span class="first_name"><%= result.first_name %></span></td>
        <td><span class="last_name"><%= result.last_name %></span></td>
        <td><span class="date"><%= result.date %></span></td>
        <td><span class="status"><%= result.status %></span></td>
        <td><a href="<%= url_for(edit_appointment_path(result.id)) %>" class="btn  btn-primary">Edit</a></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @results %>
